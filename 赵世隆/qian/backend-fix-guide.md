# åç«¯è¯¾ç¨‹å®¡æ ¸åŠŸèƒ½ä¿®æ”¹æŒ‡å— (v2)

## æ¦‚è¿°
æ ¹æ®å‰ç«¯è¯¾ç¨‹ç®¡ç†åŠŸèƒ½çš„æ›´æ–°éœ€æ±‚ï¼Œåç«¯éœ€è¦è¿›è¡Œä»¥ä¸‹ä¿®æ”¹ä»¥æ”¯æŒæ–°çš„è¯¾ç¨‹å®¡æ ¸æµç¨‹ã€‚**V2ç‰ˆæœ¬é’ˆå¯¹æˆæƒå’Œè®¤è¯é—®é¢˜æä¾›äº†æ›´æ˜ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚**

## 1. æ•°æ®åº“ä¿®æ”¹

### 1.1 è¯¾ç¨‹è¡¨å­—æ®µæ›´æ–°
ç¡®ä¿è¯¾ç¨‹è¡¨ä¸­çš„`pass`å­—æ®µæ”¯æŒä»¥ä¸‹çŠ¶æ€ï¼š
- `å¾…å®¡æ ¸` - æ–°åˆ›å»ºçš„è¯¾ç¨‹é»˜è®¤çŠ¶æ€
- `å®¡æ ¸ä¸­` - æ™®é€š/ä¼ä¸šç®¡ç†å‘˜å‘å¸ƒåçš„çŠ¶æ€
- `é€šè¿‡` - è¶…çº§ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡
- `ä¸é€šè¿‡` - è¶…çº§ç®¡ç†å‘˜å®¡æ ¸ä¸é€šè¿‡

```sql
-- ç¡®ä¿passå­—æ®µæ”¯æŒè¿™äº›çŠ¶æ€å€¼
ALTER TABLE course MODIFY COLUMN pass VARCHAR(20) DEFAULT 'å¾…å®¡æ ¸';
```

## 2. APIæ¥å£ä¿®æ”¹

### 2.1 è¯¾ç¨‹åˆ›å»ºæ¥å£ `/course/add`
- **ä¿®æ”¹ç‚¹**: æ–°åˆ›å»ºçš„è¯¾ç¨‹çŠ¶æ€å¿…é¡»è®¾ç½®ä¸º`å¾…å®¡æ ¸`
- **ä¿®æ”¹å†…å®¹**: 
  ```java
  // åœ¨ä¿å­˜è¯¾ç¨‹æ—¶ï¼Œè®¾ç½®é»˜è®¤çŠ¶æ€
  course.setPass("å¾…å®¡æ ¸");
  ```

### 2.2 è¯¾ç¨‹ä¿®æ”¹æ¥å£ `/course/update`
- **ä¿®æ”¹ç‚¹**: æ ¹æ®æ“ä½œè€…è§’è‰²å†³å®šæ˜¯å¦é‡ç½®å®¡æ ¸çŠ¶æ€
- **ä¿®æ”¹å†…å®¹**:
  ```java
  // å¦‚æœæ˜¯æ™®é€šç®¡ç†å‘˜ä¿®æ”¹è¯¾ç¨‹ï¼Œé‡ç½®çŠ¶æ€ä¸ºå¾…å®¡æ ¸
  if (!isAdmin) {
      course.setPass("å¾…å®¡æ ¸");
  }
  // è¶…çº§ç®¡ç†å‘˜ä¿®æ”¹è¯¾ç¨‹æ—¶ä¿æŒåŸçŠ¶æ€
  ```

### 2.3 è¯¾ç¨‹å‘å¸ƒæ¥å£ `/course/publish`
- **ä¿®æ”¹ç‚¹**: å°†é€‰ä¸­è¯¾ç¨‹çš„çŠ¶æ€ä»`å¾…å®¡æ ¸`æ”¹ä¸º`å®¡æ ¸ä¸­`
- **ä¿®æ”¹å†…å®¹**:
  ```java
  public Result publishCourse(@RequestBody List<Course> courses) {
      for (Course course : courses) {
          // æ£€æŸ¥è¯¾ç¨‹çŠ¶æ€ï¼Œåªæœ‰å¾…å®¡æ ¸çš„è¯¾ç¨‹æ‰èƒ½å‘å¸ƒ
          if ("å¾…å®¡æ ¸".equals(course.getPass())) {
              course.setPass("å®¡æ ¸ä¸­");
              courseService.updateCourse(course);
          }
      }
      return Result.success("è¯¾ç¨‹å‘å¸ƒæˆåŠŸï¼Œç­‰å¾…å®¡æ ¸");
  }
  ```

### 2.4 æ–°å¢å®¡æ ¸åˆ—è¡¨æ¥å£ `/course/audit-list`
- **åŠŸèƒ½**: è·å–çŠ¶æ€ä¸º`å®¡æ ¸ä¸­`çš„è¯¾ç¨‹åˆ—è¡¨
- **å®ç°å†…å®¹**:
  ```java
  @GetMapping("/audit-list")
  public Result getAuditList(HttpServletRequest request) {
      // ä»è¯·æ±‚å¤´è·å–è§’è‰²ä¿¡æ¯ (å‡è®¾æ‚¨çš„æ‹¦æˆªå™¨å°†è§’è‰²ä¿¡æ¯æ”¾å…¥äº†header)
      String userRole = request.getHeader("role"); 

      // æƒé™åˆ¤æ–­
      if (!"3".equals(userRole)) {
          return Result.error("æƒé™ä¸è¶³ï¼Œåªæœ‰è¶…çº§ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹å®¡æ ¸åˆ—è¡¨");
      }

      // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
      List<Course> auditCourses = courseService.findByStatus("å®¡æ ¸ä¸­");
      return Result.success(auditCourses).setMsg("åŠ è½½å®¡æ ¸åˆ—è¡¨æˆåŠŸ");
  }
  ```

### 2.5 æ–°å¢è¯¾ç¨‹å®¡æ ¸æ¥å£ `/course/audit`
- **åŠŸèƒ½**: è¶…çº§ç®¡ç†å‘˜å®¡æ ¸è¯¾ç¨‹
- **å®ç°å†…å®¹**:
  ```java
  @PostMapping("/audit")
  public Result auditCourse(@RequestBody AuditRequest request) {
      Course course = courseService.findById(request.getCourseId());
      if (course == null) {
          return Result.error("è¯¾ç¨‹ä¸å­˜åœ¨");
      }
      
      // åªæœ‰çŠ¶æ€ä¸º"å®¡æ ¸ä¸­"çš„è¯¾ç¨‹æ‰èƒ½è¢«å®¡æ ¸
      if (!"å®¡æ ¸ä¸­".equals(course.getPass())) {
          return Result.error("è¯¾ç¨‹çŠ¶æ€ä¸æ­£ç¡®ï¼Œæ— æ³•å®¡æ ¸");
      }
      
      // æ›´æ–°å®¡æ ¸çŠ¶æ€
      course.setPass(request.getStatus()); // "é€šè¿‡" æˆ– "ä¸é€šè¿‡"
      courseService.updateCourse(course);
      
      return Result.success("å®¡æ ¸å®Œæˆ");
  }
  
  // å®¡æ ¸è¯·æ±‚æ•°æ®ç±»
  public class AuditRequest {
      private Integer courseId;
      private String courseName;
      private String status;
      private String remark;
      // getters and setters
  }
  ```

## 3. è¯¾ç¨‹åˆ—è¡¨æ¥å£ `/course/list`
- **ä¿®æ”¹ç‚¹**: æ ¹æ®ç”¨æˆ·è§’è‰²è¿”å›ä¸åŒçš„è¯¾ç¨‹åˆ—è¡¨
- **ä¿®æ”¹å†…å®¹**:
  ```java
  @GetMapping("/list")
  public Result getCourseList(HttpServletRequest request) {
      String role = getUserRole(request); // è·å–ç”¨æˆ·è§’è‰²
      List<Course> courses;
      
      if ("è¶…çº§ç®¡ç†å‘˜".equals(role)) {
          // è¶…çº§ç®¡ç†å‘˜å¯ä»¥çœ‹åˆ°æ‰€æœ‰è¯¾ç¨‹
          courses = courseService.findAll();
      } else {
          // æ™®é€šç®¡ç†å‘˜åªèƒ½çœ‹åˆ°è‡ªå·±åˆ›å»ºçš„è¯¾ç¨‹
          String userId = getUserId(request);
          courses = courseService.findByCreator(userId);
      }
      
      return Result.success()
          .put("courses", courses)
          .put("isAdmin", "è¶…çº§ç®¡ç†å‘˜".equals(role));
  }
  ```

## 4. æƒé™æ§åˆ¶
ç¡®ä¿ä»¥ä¸‹æƒé™æ§åˆ¶æ­£ç¡®å®ç°ï¼š
- è¶…çº§ç®¡ç†å‘˜ï¼šå¯ä»¥æŸ¥çœ‹æ‰€æœ‰è¯¾ç¨‹ï¼Œå¯ä»¥å®¡æ ¸è¯¾ç¨‹ï¼Œä¸èƒ½å‘å¸ƒè¯¾ç¨‹
- æ™®é€šç®¡ç†å‘˜/ä¼ä¸šç®¡ç†å‘˜ï¼šåªèƒ½æŸ¥çœ‹è‡ªå·±åˆ›å»ºçš„è¯¾ç¨‹ï¼Œå¯ä»¥å‘å¸ƒè¯¾ç¨‹ï¼Œä¸èƒ½å®¡æ ¸è¯¾ç¨‹

## 5. æ•°æ®åº“æœåŠ¡å±‚ä¿®æ”¹

### 5.1 CourseService æ–°å¢æ–¹æ³•
```java
// æ ¹æ®çŠ¶æ€æŸ¥è¯¢è¯¾ç¨‹
List<Course> findByStatus(String status);

// æ ¹æ®åˆ›å»ºè€…æŸ¥è¯¢è¯¾ç¨‹
List<Course> findByCreator(String creatorId);

// æ‰¹é‡æ›´æ–°è¯¾ç¨‹çŠ¶æ€
void batchUpdateStatus(List<Integer> courseIds, String status);
```

## 6. çŠ¶æ€æµè½¬éªŒè¯
ç¡®ä¿åç«¯å¯¹è¯¾ç¨‹çŠ¶æ€æµè½¬è¿›è¡Œä¸¥æ ¼éªŒè¯ï¼š
- æ–°å»ºè¯¾ç¨‹ â†’ å¾…å®¡æ ¸
- å¾…å®¡æ ¸ â†’ å®¡æ ¸ä¸­ (é€šè¿‡å‘å¸ƒæ“ä½œ)
- å®¡æ ¸ä¸­ â†’ é€šè¿‡/ä¸é€šè¿‡ (é€šè¿‡å®¡æ ¸æ“ä½œ)
- ä¸å…è®¸å…¶ä»–çŠ¶æ€è½¬æ¢

## 7. æµ‹è¯•å»ºè®®
1. æµ‹è¯•ä¸åŒè§’è‰²ç”¨æˆ·çš„æƒé™æ§åˆ¶
2. æµ‹è¯•è¯¾ç¨‹çŠ¶æ€æµè½¬çš„æ­£ç¡®æ€§
3. æµ‹è¯•å®¡æ ¸æ¥å£çš„æ•°æ®éªŒè¯
4. æµ‹è¯•å¹¶å‘å®¡æ ¸çš„å¤„ç†

## 8. æ³¨æ„äº‹é¡¹
1. æ‰€æœ‰çŠ¶æ€æ›´æ–°æ“ä½œéƒ½éœ€è¦æ·»åŠ äº‹åŠ¡å¤„ç†
2. å®¡æ ¸æ“ä½œéœ€è¦è®°å½•æ“ä½œæ—¥å¿—
3. éœ€è¦å¤„ç†å¹¶å‘å®¡æ ¸çš„åœºæ™¯ï¼ˆé˜²æ­¢é‡å¤å®¡æ ¸ï¼‰
4. ç¡®ä¿å‰åç«¯çŠ¶æ€å€¼å®Œå…¨ä¸€è‡´

## 9. å‰ç«¯å·²å®Œæˆçš„ä¿®æ”¹
- è¶…çº§ç®¡ç†å‘˜é¡µé¢ï¼šå‘å¸ƒæŒ‰é’®æ”¹ä¸ºæŸ¥çœ‹å®¡æ ¸åˆ—è¡¨æŒ‰é’®
- å®¡æ ¸çŠ¶æ€æ˜¾ç¤ºï¼šæ‰€æœ‰ç®¡ç†å‘˜éƒ½èƒ½çœ‹åˆ°è¯¾ç¨‹çš„å®¡æ ¸çŠ¶æ€
- å‘å¸ƒé€»è¾‘ï¼šåªæœ‰æ™®é€šç®¡ç†å‘˜å’Œä¼ä¸šç®¡ç†å‘˜èƒ½çœ‹åˆ°å‘å¸ƒæŒ‰é’®
- å®¡æ ¸åˆ—è¡¨ï¼šè¶…çº§ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹å’Œå¤„ç†å®¡æ ¸ä¸­çš„è¯¾ç¨‹

## 10. "æƒé™ä¸è¶³"é—®é¢˜ä¿®å¤ (`/course/audit-list`)

**é—®é¢˜å®šä½**ï¼šå‰ç«¯è¯·æ±‚ `/course/audit-list` æ—¶ï¼Œåç«¯è¿”å› "æƒé™ä¸è¶³"ã€‚åŸå› æ˜¯è¯¥æ¥å£çš„åç«¯å®ç°æ²¡æœ‰å¯¹ç”¨æˆ·è§’è‰²è¿›è¡Œæ ¡éªŒã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šä¸º `/course/audit-list` æ¥å£æ·»åŠ æƒé™æ ¡éªŒï¼Œç¡®ä¿åªæœ‰è§’è‰²IDä¸º'3'çš„è¶…çº§ç®¡ç†å‘˜å¯ä»¥è®¿é—®ã€‚

**ä»£ç ç¤ºä¾‹ (ä»¥Spring Bootä¸ºä¾‹)**ï¼š
```java
import javax.servlet.http.HttpServletRequest;

@RestController
@RequestMapping("/course")
public class CourseController {

    // ... å…¶ä»–ä¾èµ–æ³¨å…¥

    @GetMapping("/audit-list")
    public Result getAuditList(HttpServletRequest request) {
        // ä»è¯·æ±‚å¤´è·å–è§’è‰²ä¿¡æ¯ (å‡è®¾æ‚¨çš„æ‹¦æˆªå™¨å°†è§’è‰²ä¿¡æ¯æ”¾å…¥äº†header)
        String userRole = request.getHeader("role"); 

        // æƒé™åˆ¤æ–­
        if (!"3".equals(userRole)) {
            return Result.error("æƒé™ä¸è¶³ï¼Œåªæœ‰è¶…çº§ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹å®¡æ ¸åˆ—è¡¨");
        }

        // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
        List<Course> auditCourses = courseService.findByStatus("å®¡æ ¸ä¸­");
        return Result.success(auditCourses).setMsg("åŠ è½½å®¡æ ¸åˆ—è¡¨æˆåŠŸ");
    }

    // ... å…¶ä»–æ¥å£
}
```

## 11. "è¯·å…ˆç™»å½•"é—®é¢˜ä¿®å¤ (`/course/update`)

**é—®é¢˜å®šä½**ï¼šå‰ç«¯ä½¿ç”¨ `FormData` æäº¤è¯¾ç¨‹ä¿®æ”¹æ•°æ®åˆ° `/course/update` æ—¶ï¼Œåç«¯è¿”å› "è¯·å…ˆç™»å½•"ã€‚è¿™æ˜¯å› ä¸ºåç«¯æœªèƒ½æ­£ç¡®å¤„ç† `multipart/form-data` ç±»å‹è¯·æ±‚çš„è®¤è¯ä¿¡æ¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿ `/course/update` æ¥å£èƒ½æ­£ç¡®å¤„ç† `multipart` è¯·æ±‚å¹¶å®Œæˆè®¤è¯ã€‚é€šå¸¸è¿™æ„å‘³ç€éœ€è¦æ­£ç¡®é…ç½®Spring Securityæˆ–æ‚¨çš„è®¤è¯æ‹¦æˆªå™¨ã€‚

**ä»£ç ç¤ºä¾‹ (ä»¥Spring Bootä¸ºä¾‹)**ï¼š
```java
import javax.servlet.http.HttpServletRequest;

@RestController
@RequestMapping("/course")
public class CourseController {

    // ... å…¶ä»–ä¾èµ–æ³¨å…¥

    // ä½¿ç”¨ @PostMapping æˆ– @PutMapping
    @PostMapping("/update") 
    public Result updateCourse(HttpServletRequest request, Course course) { 
        // Course course å‚æ•°ä¼šè‡ªåŠ¨ä»form-dataä¸­å°è£…
        // æ‚¨çš„è®¤è¯æ‹¦æˆªå™¨åº”è¯¥å·²ç»åœ¨æ­¤ä¹‹å‰è¿è¡Œï¼Œå¹¶éªŒè¯äº†ç”¨æˆ·èº«ä»½

        // (å¯é€‰) å†æ¬¡æ£€æŸ¥æƒé™
        String userRole = request.getHeader("role");
        if (!"3".equals(userRole)) { // å‡è®¾åªæœ‰ç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹
             // return Result.error("æƒé™ä¸è¶³");
        }

        // æ ¹æ®å‰ç«¯é€»è¾‘ï¼Œå¦‚æœéç®¡ç†å‘˜ä¿®æ”¹ï¼ŒçŠ¶æ€åº”é‡ç½®
        if (!"3".equals(userRole)) {
            course.setPass("å¾…å®¡æ ¸");
        }

        // æ‰§è¡Œæ›´æ–°æœåŠ¡
        courseService.updateCourse(course);

        return Result.success().setMsg("ä¿®æ”¹æˆåŠŸ");
    }

    // ... å…¶ä»–æ¥å£
}

```
**æ³¨æ„**ï¼š
- åœ¨ `updateCourse` æ–¹æ³•ä¸­ï¼Œå‚æ•° `Course course` å¯ä»¥è®©Spring MVCè‡ªåŠ¨å°†è¡¨å•ä¸­çš„å­—æ®µæ˜ å°„åˆ°`Course`å¯¹è±¡çš„å±æ€§ä¸Šï¼Œéå¸¸æ–¹ä¾¿ã€‚
- è¯·ç¡®ä¿æ‚¨çš„**è®¤è¯æ‹¦æˆªå™¨**æˆ–**Spring Securityé…ç½®**å¯¹ `/course/update` è·¯å¾„ç”Ÿæ•ˆï¼Œå¹¶ä¸”èƒ½å¤„ç† `multipart/form-data` è¯·æ±‚ã€‚

## 12. å…¶ä»–æ¥å£å›é¡¾

è¯·ç¡®ä¿ä»¥ä¸‹æ¥å£çš„æƒé™å’Œé€»è¾‘ä¹Ÿå·²æ­£ç¡®å®ç°ï¼š

- **`/course/add`**: éœ€è®¤è¯ã€‚
- **`/course/publish`**: éœ€è®¤è¯ï¼Œä¸”è§’è‰²ä¸èƒ½æ˜¯è¶…çº§ç®¡ç†å‘˜ã€‚
- **`/course/audit`**: éœ€è®¤è¯ï¼Œä¸”è§’è‰²å¿…é¡»æ˜¯è¶…çº§ç®¡ç†å‘˜ã€‚
- **`/course/list`**: æ ¹æ®è§’è‰²è¿”å›ä¸åŒæ•°æ®ã€‚

å°†æ­¤æŒ‡å—äº¤ç»™æ‚¨çš„åç«¯å¼€å‘äººå‘˜ï¼Œåº”è¯¥å¯ä»¥å¿«é€Ÿå®šä½å¹¶è§£å†³é—®é¢˜ã€‚

## è¡Œä¸šåŠ¨æ€ç›¸å…³æ¥å£

### 1. æ–°å¢åŠ¨æ€æ¥å£ (`/news/add`)
- **ä¿®å¤**: ç»Ÿä¸€ä½¿ç”¨ `status` å­—æ®µï¼Œå€¼ä¸º `PENDING`
- **å»ºè®®**: ä¿æŒç°æœ‰ `pass` å­—æ®µå…¼å®¹æ€§

### 2. å‘å¸ƒåŠ¨æ€æ¥å£ (`/news/publish`)
- **ä¿®å¤**: æ”¯æŒæ‰¹é‡å‘å¸ƒï¼Œå‚æ•°ä¸º ID æ•°ç»„
- **å»ºè®®**: æ·»åŠ æƒé™æ£€æŸ¥ï¼Œç¡®ä¿åªæœ‰ä½œè€…å¯ä»¥å‘å¸ƒè‡ªå·±çš„åŠ¨æ€

### 3. å®¡æ ¸åŠ¨æ€æ¥å£ (`/news/approve`, `/news/reject`)
- **ä¿®å¤**: å®ç°å®¡æ ¸é€šè¿‡å’Œé©³å›åŠŸèƒ½
- **å»ºè®®**: æ·»åŠ æ“ä½œæ—¥å¿—è®°å½•

## è¯¾ç¨‹ç®¡ç†ç›¸å…³æ¥å£

### 1. è¯¾ç¨‹åˆ—è¡¨æ¥å£ (`/course/list`)
- **ä¿®å¤**: æ”¯æŒ `authorId` å‚æ•°ç”¨äºæƒé™è¿‡æ»¤
  - å½“ `authorId` å­˜åœ¨æ—¶ï¼Œåªè¿”å›è¯¥ç”¨æˆ·åˆ›å»ºçš„è¯¾ç¨‹
  - å½“ `isAdminView=true` æ—¶ï¼Œè¿”å›æ‰€æœ‰è¯¾ç¨‹
- **å»ºè®®**: åç«¯å®ç°æƒé™è¿‡æ»¤é€»è¾‘

### 2. æ–°å¢è¯¾ç¨‹æ¥å£ (`/course/add`)
- **ä¿®å¤**: è‡ªåŠ¨è®¾ç½® `authorId` ä¸ºå½“å‰ç”¨æˆ·ID
- **ä¿®å¤**: ç»Ÿä¸€ä½¿ç”¨ `status` å­—æ®µï¼Œå€¼ä¸º `PENDING`
- **å»ºè®®**: ä¿æŒç°æœ‰ `pass` å­—æ®µå…¼å®¹æ€§

### 3. æ›´æ–°è¯¾ç¨‹æ¥å£ (`/course/update`)
- **ä¿®å¤**: æ”¯æŒæƒé™å‚æ•°
  - `adminEdit`: æ˜¯å¦ä¸ºç®¡ç†å‘˜ç¼–è¾‘
  - `operatorRole`: æ“ä½œè€…è§’è‰²
  - `operatorId`: æ“ä½œè€…ID
- **å»ºè®®**: æ·»åŠ æƒé™æ£€æŸ¥ï¼Œç¡®ä¿åªæœ‰ä½œè€…æˆ–è¶…çº§ç®¡ç†å‘˜å¯ä»¥ç¼–è¾‘

### 4. åˆ é™¤è¯¾ç¨‹æ¥å£ (`/course/delete`)
- **ä¿®å¤**: æ”¯æŒå¤šç§æƒé™å‚æ•°
  - `operatorId`: æ“ä½œè€…ID
  - `operatorRole`: æ“ä½œè€…è§’è‰²
  - `isSuperAdmin`: æ˜¯å¦ä¸ºè¶…çº§ç®¡ç†å‘˜
  - `adminForceDelete`: ç®¡ç†å‘˜å¼ºåˆ¶åˆ é™¤
- **å»ºè®®**: æ·»åŠ æƒé™æ£€æŸ¥ï¼Œç¡®ä¿åªæœ‰ä½œè€…æˆ–è¶…çº§ç®¡ç†å‘˜å¯ä»¥åˆ é™¤

### 5. è¯¾ç¨‹å®¡æ ¸æ¥å£ (`/course/approve`, `/course/reject`)
- **ä¿®å¤**: å®ç°å®¡æ ¸é€šè¿‡å’Œé©³å›åŠŸèƒ½
- **å»ºè®®**: åªå…è®¸è¶…çº§ç®¡ç†å‘˜è¿›è¡Œå®¡æ ¸æ“ä½œ

### 6. è¯¾ç¨‹å‘å¸ƒæ¥å£ (`/course/publish` æˆ– `/course/submitForReview`)
- **ä¿®å¤**: æ”¯æŒæ‰¹é‡å‘å¸ƒï¼Œå‚æ•°ä¸º ID æ•°ç»„
- **å»ºè®®**: æ·»åŠ æƒé™æ£€æŸ¥ï¼Œç¡®ä¿åªæœ‰ä½œè€…å¯ä»¥å‘å¸ƒè‡ªå·±çš„è¯¾ç¨‹

## æƒé™ä½“ç³»

### è§’è‰²å®šä¹‰
- **è¶…çº§ç®¡ç†å‘˜ (role=3)**: 
  - å¯ä»¥æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤æ‰€æœ‰è¯¾ç¨‹
  - æ‹¥æœ‰å®¡æ ¸æƒé™
  - ä¸èƒ½å‘å¸ƒè¯¾ç¨‹ï¼ˆåªèƒ½å®¡æ ¸ï¼‰
  
- **ä¼ä¸šç®¡ç†å‘˜ (role=2)**: 
  - åªèƒ½æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤è‡ªå·±åˆ›å»ºçš„è¯¾ç¨‹
  - æ‹¥æœ‰å‘å¸ƒæƒé™
  - ä¸èƒ½å®¡æ ¸è¯¾ç¨‹

- **æ™®é€šç®¡ç†å‘˜ (role=1)**: 
  - åªèƒ½æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤è‡ªå·±åˆ›å»ºçš„è¯¾ç¨‹
  - æ‹¥æœ‰å‘å¸ƒæƒé™
  - ä¸èƒ½å®¡æ ¸è¯¾ç¨‹

### çŠ¶æ€æµè½¬
- **æ–°å»º**: `PENDING`ï¼ˆå¾…å®¡æ ¸ï¼‰
- **å‘å¸ƒ**: `REVIEWING`ï¼ˆå®¡æ ¸ä¸­ï¼‰
- **é€šè¿‡**: `PUBLISHED`ï¼ˆå·²å‘å¸ƒï¼‰
- **é©³å›**: `REJECTED`ï¼ˆå·²é©³å›ï¼‰â†’ å¯é‡æ–°å‘å¸ƒ

## æ•°æ®å…¼å®¹æ€§

### çŠ¶æ€å­—æ®µæ˜ å°„
```javascript
// å‰ç«¯å¤„ç†æ–°æ—§çŠ¶æ€æ˜ å°„
const statusMapping = {
  'å¾…å®¡æ ¸': 'PENDING',
  'å®¡æ ¸ä¸­': 'REVIEWING',
  'é€šè¿‡': 'PUBLISHED',
  'ä¸é€šè¿‡': 'REJECTED'
};
```

### å»ºè®®åç«¯è¿”å›æ ¼å¼
```json
{
  "id": 1,
  "name": "è¯¾ç¨‹åç§°",
  "author": "ä½œè€…å",
  "authorId": 123,
  "status": "PENDING",
  "pass": "å¾…å®¡æ ¸",
  "coverUrl": "/path/to/cover.jpg",
  "videoUrl": "/path/to/video.mp4",
  "introduction": "è¯¾ç¨‹ç®€ä»‹",
  "courseOrder": 1,
  "createTime": "2024-01-01 10:00:00"
}
```

## ğŸš¨ ç´§æ€¥ä¿®å¤ï¼šè¯¾ç¨‹æ·»åŠ 500é”™è¯¯

### é”™è¯¯ç°è±¡
- å‰ç«¯å‘é€è¯¾ç¨‹æ·»åŠ è¯·æ±‚åï¼Œåç«¯è¿”å›ï¼š`{"msg":"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•","code":500}`
- è¯·æ±‚æ•°æ®æ ¼å¼æ­£ç¡®ï¼ŒåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ

### å¯èƒ½åŸå› åŠè§£å†³æ–¹æ¡ˆ

#### 1. æ•°æ®åº“å­—æ®µä¸åŒ¹é…
**æ£€æŸ¥é¡¹**ï¼š
- ç¡®è®¤æ•°æ®åº“è¡¨æ˜¯å¦æœ‰ `authorId` å­—æ®µ
- ç¡®è®¤æ•°æ®åº“è¡¨æ˜¯å¦æœ‰ `status` å­—æ®µ
- æ£€æŸ¥å­—æ®µç±»å‹æ˜¯å¦åŒ¹é…ï¼ˆå¦‚ `authorId` åº”ä¸ºæ•°å­—ç±»å‹ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
```sql
-- å¦‚æœç¼ºå°‘å­—æ®µï¼Œæ·»åŠ ç›¸åº”å­—æ®µ
ALTER TABLE course ADD COLUMN authorId INT;
ALTER TABLE course ADD COLUMN status VARCHAR(20);
```

#### 2. å­—æ®µéªŒè¯å¤±è´¥
**æ£€æŸ¥é¡¹**ï¼š
- åç«¯æ˜¯å¦å¯¹ `status` å­—æ®µè¿›è¡Œäº†æšä¸¾éªŒè¯
- æ˜¯å¦å¯¹ `authorId` è¿›è¡Œäº†å¤–é”®çº¦æŸæ£€æŸ¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```java
// æš‚æ—¶æ”¾å®½éªŒè¯æˆ–æ·»åŠ å¯¹åº”çš„æšä¸¾å€¼
public enum CourseStatus {
    PENDING("å¾…å®¡æ ¸"),
    REVIEWING("å®¡æ ¸ä¸­"), 
    PUBLISHED("å·²å‘å¸ƒ"),
    REJECTED("å·²é©³å›")
}
```

#### 3. æƒé™éªŒè¯å¤±è´¥
**æ£€æŸ¥é¡¹**ï¼š
- æ£€æŸ¥ç”¨æˆ·IDæ˜¯å¦å­˜åœ¨
- æ£€æŸ¥ç”¨æˆ·æƒé™æ˜¯å¦å…è®¸åˆ›å»ºè¯¾ç¨‹

#### 4. å“åº”æ ¼å¼ç»Ÿä¸€
**å½“å‰é—®é¢˜**ï¼šåç«¯è¿”å›æ ¼å¼ä¸ç»Ÿä¸€
- æˆåŠŸæ—¶ï¼š`{isOk: true, msg: "...", data: ...}`
- å¤±è´¥æ—¶ï¼š`{code: 500, msg: "..."}`

**å»ºè®®ç»Ÿä¸€æ ¼å¼**ï¼š
```json
{
  "isOk": false,
  "code": 500,
  "msg": "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•",
  "data": null
}
```

### è°ƒè¯•æ­¥éª¤
1. æ£€æŸ¥åç«¯æ—¥å¿—ï¼ŒæŸ¥çœ‹å…·ä½“å¼‚å¸¸ä¿¡æ¯
2. ç¡®è®¤æ•°æ®åº“è¿æ¥å’Œè¡¨ç»“æ„
3. éªŒè¯è¯·æ±‚æ•°æ®æ ¼å¼æ˜¯å¦ç¬¦åˆåç«¯æœŸæœ›
4. æµ‹è¯•ç”¨æˆ·æƒé™å’Œæ•°æ®åº“çº¦æŸ

## æƒé™è¿‡æ»¤é—®é¢˜

### é—®é¢˜ç°è±¡
ä¼ä¸šç®¡ç†å‘˜çœ‹ä¸åˆ°è‡ªå·±åˆ›å»ºçš„è¯¾ç¨‹ï¼ˆè¿‡æ»¤åæ•°é‡ä¸º0ï¼‰

### å¯èƒ½åŸå› 
1. åç«¯è¿”å›çš„è¯¾ç¨‹æ•°æ®ä¸­ç¼ºå°‘ `authorId` å­—æ®µ
2. `authorId` å­—æ®µå€¼ä¸ç”¨æˆ·IDä¸åŒ¹é…
3. æ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼ˆå­—ç¬¦ä¸²vsæ•°å­—ï¼‰

### è§£å†³æ–¹æ¡ˆ
åç«¯åœ¨è¿”å›è¯¾ç¨‹åˆ—è¡¨æ—¶ï¼Œç¡®ä¿åŒ…å« `authorId` å­—æ®µï¼š
```json
{
  "id": 1,
  "name": "è¯¾ç¨‹åç§°",
  "author": "ä½œè€…å",
  "authorId": 98,  // é‡è¦ï¼šå¿…é¡»åŒ…å«æ­¤å­—æ®µ
  "status": "PENDING",
  "pass": "å¾…å®¡æ ¸"
}
```

## å®æ–½ä¼˜å…ˆçº§

1. **ğŸ”¥ ç´§æ€¥**: ä¿®å¤è¯¾ç¨‹æ·»åŠ 500é”™è¯¯
2. **é«˜ä¼˜å…ˆçº§**: è¯¾ç¨‹åˆ—è¡¨æƒé™è¿‡æ»¤
3. **ä¸­ä¼˜å…ˆçº§**: æ–°å¢/æ›´æ–°è¯¾ç¨‹æƒé™æ§åˆ¶
4. **ä½ä¼˜å…ˆçº§**: å®¡æ ¸æ¥å£å®ç° 